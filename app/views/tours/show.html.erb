<div class="container-fluid tour-container" data-controller="map tour-view" data-map-markers-value="<%= @markers.to_json %>">
  <%# <div  data-controller="tour_view"> %>


    <div class="tour-texts">
      <h3><%= @tour.name %></h3>
      <p><%= @tour.description %></p>
    </div>

    <div class="add-container mx-2">

        <% if @tour.sites.size > 0 %>
          <div class="sites-container" data-tour-view-target="sites">
            <% @tour.sites.each do |site| %>
              <div class="site-card" data-flat-id="<%= site.id %>">
              <h4><%= site.name %></h4>
                <div class="site-card-info">
                  <p><%= site.address %></p>
                  <%= link_to site_path(site), class: "card-tour-button" do %>
                    <i class="fa-solid fa-eye"></i>
                  <% end %>
                  <%= link_to new_site_note_path(site) do %>
                    <i class="fa-solid fa-plus" class="properlink"></i>
                  <% end %>
                  <%= link_to site_path(site), data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to remove #{site.name} from your tours?"}, class: "card-tour-button" do %>
                    <i class="fa-sharp fa-solid fa-circle-xmark"></i>
                  <% end %>
                </div>

              </div>

            <% end %>
          </div>
        <% end %>

        <div id="map" class="tour-map"></div>

        <%# <div ></div> %>

        <%= render "sites/form" %>

    </div>


    <div>
      <% if @tour.sites.size > 0 %>
        <button class="siteBtn" data-tour-view-target="siteBtn" data-action="click->tour-view#siteToggleHide">
          <i class="fa-solid fa-map-location-dot"></i>
        </button>
      <% end %>
    </div>

  <%# </div> %>

</div>
