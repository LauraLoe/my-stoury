<div class="container-fluid tour-container" data-controller="map" data-map-markers-value="<%= @markers.to_json %>">

  <div class="tour-texts">
    <h3><%= @tour.name %></h3>
    <p><%= @tour.description %></p>
  </div>

  <div class="add-container mx-2">

      <%= link_to "Add user", new_tour_tour_user_path(@tour) %>

      <% @tour.users.each do |user| %>
        <%= user.username %>
        <%= link_to "Delete user", tour_user_path(@tour), data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to remove #{user.username} from your #{@tour.name} tour?" }  %>
      <% end %>


      <% if @tour.sites.size > 0 %>
        <div class="sites-container">
          <% @tour.sites.each do |site| %>
            <div class="site-card">
            <h4><%= site.name %></h4>
            <p><%= site.address %></p>
              <%= link_to site_path(site), class: "card-tour-button" do %>
                <i class="fa-solid fa-eye"></i>
              <% end %>
              <%= link_to new_site_note_path(site) do %>
                <i class="fa-solid fa-plus" class="properlink"></i>
              <% end %>
            <%= link_to site_path(site), data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to remove #{site.name} from your tours?"}, class: "card-tour-button" do %>
                <i class="fa-sharp fa-solid fa-circle-xmark"></i>
            <% end %>
            </div>

          <% end %>
        </div>
      <% end %>



      <div id="map" class="tour-map"></div>


      <%= render "sites/form" %>

  </div>




</div>
